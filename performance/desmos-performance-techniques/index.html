<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="/unofficial-desmos-wiki/css/base.css" />
    <title>Desmos Performance Techniques</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
    
<script src="https://www.desmos.com/api/v1.8/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"></script>

<script defer>
window.addEventListener("load", () => {
  for (const e of document.getElementsByClassName("eleventy-desmos-mq-container")) {  
    const staticMath = Desmos.MathQuill.StaticMath(e);
    staticMath.latex(e.dataset.latex);
    e.querySelector(".dcg-mq-root-block").style.display = "inline";

    const settings = JSON.parse(e.dataset.settings);
    if (settings.copyButton) {
      const copyButton = document.createElement("button");
      copyButton.classList.toggle("eleventy-desmos-copy-button", true);
      copyButton.innerText = "Copy to Clipboard"
      e.parentElement.appendChild(copyButton);
      copyButton.onclick = () => {
        navigator.clipboard.writeText(e.dataset.latex);
        copyButton.innerText = "Copied!";
        setTimeout(() => {
          copyButton.innerHTML = "Copy to Clipboard";
        }, 750);
      }
    }
  }

  for (const e of document.getElementsByClassName("eleventy-desmos-dcg-container")) {
    const observer = new IntersectionObserver((entries, observer) => {
      if (!Array.from(entries).some(e => e.isIntersecting)) return;
      const Calc = Desmos.GraphingCalculator(e, JSON.parse(e.dataset.settings));
      Calc.setState(JSON.parse(e.dataset.state))
      observer.disconnect()
    });
    observer.observe(e, { threshold: 0.01 });
  }

})</script>
    
    <script src="/unofficial-desmos-wiki/pagefind/pagefind-ui.js"></script>
  </head>
  <body>
    <header class="header-side-by-side">
      <a href="/unofficial-desmos-wiki/">
        <div class="site-name">Desmos Wiki
          <span class="unofficial">(Unofficial)</span>
        </div>
      </a>
      <div id="searchbar"></div>
      <script>
        new PagefindUI({ element: "#searchbar"})
      </script>
      <button id="light-dark-toggle"></button>
    </header>
    <div class="main-content-side-by-side">
      <nav class="header-nav">
        <span class="header-nav-title">Desmos Performance Techniques</span>
        
      </nav>
      <main>
        <h1 data-weight="0">Desmos Performance Techniques</h1>
        <ul class="tags">
          
            <li class="tag">
              <a href="/unofficial-desmos-wiki/tag/list-manipulation/">list-manipulation</a>
            </li>
          
            <li class="tag">
              <a href="/unofficial-desmos-wiki/tag/performance/">performance</a>
            </li>
          
        </ul>
        
          <p>Here are a list of guidelines that will generally make your graph run faster.</p>
<ul>
<li>In many cases, <a href="/unofficial-desmos-wiki/misc/piecewises/">piecewise</a> functions will compute every branch, even though they will resolve to only one branch. This is especially the case when you are not working with parametric, rectangular, or polar functions— for instance, if you are using points or polygons. Do not rely on piecewises for conditional execution in this case!</li>
<li>Generally (but not always), implicit equations/inequalities are slow. Rectangular, polar, and parametric equations are faster. Points are faster still. Polygons are often the fastest.</li>
<li>(Note: this may no longer be the case) Disable the line outlines on polygons for best performance. These outlines are expensive to render onto the screen!</li>
<li>Do not directly update large lists with actions if at all possible, because the text underlying the displayed expression will have to be generated again. Instead, update the variable(s) that that list depends on; then, let the list update itself automatically.</li>
<li>Large numbers of expressions (a few hundred or more) will reduce FPS for unclear reasons. This tends to become significant after about 1000 expressions.</li>
<li>Add ?simulationFPS or ?timeInWorker to your graph link to display the FPS or the approximate time taken to render a frame, respectively.</li>
<li>If possible, batch lists into individual equations, polygons, et cetera. GPUs are excellent at handling a few massive drawing operations, but are poor at handling many small drawing operations. For instance, you can use a single parametric to draw many objects. Similarly, you can split a single large polygon into multiple noncontiguous polygons by using points that contain undefined values (e.g. (0/0, 0/0)). Keep in mind that this optimization will not work properly if you want multiple colors.</li>
<li>Desmos optimizes specific kinds of equations. For example, a linear equation will be drawn far faster than a sine wave.</li>
<li>If you have equations that change over time as the result of an action, place them in a folder and close that folder. That way, the text itself won't be redrawn (very expensive!) when it changes.</li>
<li>The right side of an action is computed whenever its dependencies change, regardless of whether the whole action itself is run. As a result, actions that "do nothing" most of the time will still decrease performance.</li>
<li>Have no choice but to modify a large list with actions directly? In particular circumstances, This can be solved by storing multiple numbers inside of each number. For a simple example, let's say you are storing two numbers that range from 0-999, which we'll call n1 and n2. You can store both of these inside a single number by representing the one number as n1 + 1000 * n2. We'll call this combined number "combined." To retrieve n1, we can do mod(combined, 1000). To retrieve n2, we can do floor(combined / 1000). We can actually store far more data in a Desmos number due than this to the fact that Desmos numbers are stored internally as <a href="https://en.wikipedia.org/wiki/Double-precision_floating-point_format">double-precision floating-point numbers.</a> For an example of this technique in action, see <a href="https://www.desmos.com/calculator/eqafyaphp7">this graph</a>, which stores a grid of 1000 boxes— which can either be "full" or "empty"— in a list only 20 elements long. You can see this list— named "cubes"— under the "stuff" folder.</li>
</ul>

        
      </main>
    </div>
    <footer>
  <h2>Licensing</h2>
  <ul>
    <li>The source code that generates this site is licensed under the <a href="https://github.com/radian628/unofficial-desmos-wiki/blob/main/LICENSE.txt">MIT License</a>.</li>
    <li>All graphs and equations are licensed under <a href="https://creativecommons.org/public-domain/cc0/">CC0</a>, which essentially means "do whatever you want," so feel free to copy them to your own projects!</li>
    <li>The wiki articles themselves are licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC-BY-SA 4.0</a> so that the articles on this wiki may forever be free.</li>
  </ul>
</footer>
    <script>
      const ldt = document.getElementById("light-dark-toggle");

      let colorScheme = localStorage.getItem("color-scheme");

      if (!colorScheme) {
        localStorage.setItem("color-scheme", "light");
        let colorScheme = "light";
      }

      function setTheme() {
        const colorScheme = localStorage.getItem("color-scheme");

        document.body.classList.toggle("dark", colorScheme === "dark");

        ldt.innerText = colorScheme === "light" ? "☀️" : "🌙"
      }
      
      ldt.onclick = () => {
        localStorage.setItem("color-scheme", 
          localStorage.getItem("color-scheme") === "light" ? "dark" : "light")
        setTheme();
      }

      setTheme();
    </script>
  </body>
</html>