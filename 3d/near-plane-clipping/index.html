<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="/unofficial-desmos-wiki/css/base.css" />
    <title>Near Plane Clipping</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
    
<script src="https://www.desmos.com/api/v1.8/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"></script>

<script defer>
window.addEventListener("load", () => {
  for (const e of document.getElementsByClassName("eleventy-desmos-mq-container")) {  
    const staticMath = Desmos.MathQuill.StaticMath(e);
    staticMath.latex(e.dataset.latex);
    e.querySelector(".dcg-mq-root-block").style.display = "inline";

    const settings = JSON.parse(e.dataset.settings);
    if (settings.copyButton) {
      const copyButton = document.createElement("button");
      copyButton.classList.toggle("eleventy-desmos-copy-button", true);
      copyButton.innerText = "Copy to Clipboard"
      e.parentElement.appendChild(copyButton);
      copyButton.onclick = () => {
        navigator.clipboard.writeText(e.dataset.latex);
        copyButton.innerText = "Copied!";
        setTimeout(() => {
          copyButton.innerHTML = "Copy to Clipboard";
        }, 750);
      }
    }
  }

  for (const e of document.getElementsByClassName("eleventy-desmos-dcg-container")) {
    const observer = new IntersectionObserver((entries, observer) => {
      if (!Array.from(entries).some(e => e.isIntersecting)) return;
      const Calc = Desmos.GraphingCalculator(e, JSON.parse(e.dataset.settings));
      Calc.setState(JSON.parse(e.dataset.state))
      observer.disconnect()
    });
    observer.observe(e, { threshold: 0.01 });
  }

})</script>
    
    <script src="/unofficial-desmos-wiki/pagefind/pagefind-ui.js"></script>
  </head>
  <body>
    <header class="header-side-by-side">
      <a href="/unofficial-desmos-wiki/">
        <div class="site-name">Desmos Wiki
          <span class="unofficial">(Unofficial)</span>
        </div>
      </a>
      <div id="searchbar"></div>
      <script>
        new PagefindUI({ element: "#searchbar"})
      </script>
      <button id="light-dark-toggle"></button>
    </header>
    <div class="main-content-side-by-side">
      <nav class="header-nav">
        <span class="header-nav-title">Near Plane Clipping</span>
        <ul><li><a href="#What's-Causing-This">What's Causing This?</a></li><li><a href="#How-do-we-fix-it">How do we fix it?</a><ul><li><a href="#A-simple-solution">A simple solution</a></li></ul></li><li><a href="#Pixel-Perfect-Near-Plane-Clipping">Pixel-Perfect Near Plane Clipping</a><ul><li><a href="#Which-vertices-are-in-front-of-the-near-clipping-plane">Which vertices are in front of the near clipping plane?</a></li><li><a href="#Cases-1-and-4">Cases 1 & 4</a></li><li><a href="#Case-3">Case 3</a><ul><li><a href="#Finding-the-new-vertices">Finding the new vertices</a></li></ul></li><li><a href="#Case-2">Case 2</a></li></ul></li><li><a href="#The-End-Result">The End Result</a></li></ul>
      </nav>
      <main>
        <h1 data-weight="0">Near Plane Clipping</h1>
        <ul class="tags">
          
            <li class="tag">
              <a href="/unofficial-desmos-wiki/tag/3d/">3d</a>
            </li>
          
            <li class="tag">
              <a href="/unofficial-desmos-wiki/tag/guide/">guide</a>
            </li>
          
        </ul>
        
          <p>If you've ever messed around with 3D rendering in Desmos, you almost certainly will have encountered this issue:</p>
<div class="eleventy-desmos-dcg-container" data-state="{&quot;version&quot;:9,&quot;randomSeed&quot;:&quot;&quot;,&quot;graph&quot;:{&quot;viewport&quot;:{&quot;xmin&quot;:-2,&quot;ymin&quot;:-2,&quot;xmax&quot;:2,&quot;ymax&quot;:2},&quot;squareAxes&quot;:true,&quot;xAxisLabel&quot;:&quot;&quot;,&quot;yAxisLabel&quot;:&quot;&quot;,&quot;xAxisArrowMode&quot;:&quot;NONE&quot;,&quot;yAxisArrowMode&quot;:&quot;NONE&quot;,&quot;xAxisMinorSubdivisions&quot;:0,&quot;yAxisMinorSubdivisions&quot;:0,&quot;xAxisStep&quot;:0,&quot;yAxisStep&quot;:0,&quot;degreeMode&quot;:false,&quot;showGrid&quot;:true,&quot;showXAxis&quot;:true,&quot;showYAxis&quot;:true,&quot;xAxisNumbers&quot;:true,&quot;yAxisNumbers&quot;:true,&quot;polarNumbers&quot;:true,&quot;restrictGridToFirstQuadrant&quot;:false,&quot;polarMode&quot;:false,&quot;userLockedViewport&quot;:true},&quot;expressions&quot;:{&quot;list&quot;:[{&quot;id&quot;:&quot;2&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#c74440&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;C_{ameraX}=0&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{}},{&quot;id&quot;:&quot;3&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#2d70b3&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;C_{ameraY}=0&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{}},{&quot;id&quot;:&quot;4&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#388c46&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;C_{ameraZ}=0&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;animationPeriod&quot;:4000,&quot;loopMode&quot;:&quot;LOOP_FORWARD_REVERSE&quot;,&quot;playDirection&quot;:1,&quot;isPlaying&quot;:true,&quot;hardMin&quot;:true,&quot;min&quot;:&quot;-8&quot;,&quot;hardMax&quot;:true,&quot;max&quot;:&quot;-3&quot;},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{}},{&quot;id&quot;:&quot;5&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;folder&quot;,&quot;hidden&quot;:false,&quot;collapsed&quot;:true,&quot;title&quot;:&quot;Internals&quot;},{&quot;id&quot;:&quot;6&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#fa7e19&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;X_{VertexPositionsModelSpace}=\\left[-1,1,-1,1,-1,1,-1,1\\right]+1.3&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;5&quot;},{&quot;id&quot;:&quot;7&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#6042a6&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;Y_{VertexPositionsModelSpace}=\\left[-1,-1,1,1,-1,-1,1,1\\right]+1.5&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;5&quot;},{&quot;id&quot;:&quot;8&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#000000&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;Z_{VertexPositionsModelSpace}=\\left[-5,-5,-5,-5,-7,-7,-7,-7\\right]&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;5&quot;},{&quot;id&quot;:&quot;9&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#c74440&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;X_{VertexPositionsViewSpace}=X_{VertexPositionsModelSpace}-C_{ameraX}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;5&quot;},{&quot;id&quot;:&quot;10&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#2d70b3&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;Y_{VertexPositionsViewSpace}=Y_{VertexPositionsModelSpace}-C_{ameraY}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;5&quot;},{&quot;id&quot;:&quot;11&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#388c46&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;Z_{VertexPositionsViewSpace}=Z_{VertexPositionsModelSpace}-C_{ameraZ}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;5&quot;},{&quot;id&quot;:&quot;12&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#fa7e19&quot;,&quot;hidden&quot;:true,&quot;latex&quot;:&quot;S_{creenSpacePoints}=\\frac{\\left(X_{VertexPositionsViewSpace},Y_{VertexPositionsViewSpace}\\right)}{-Z_{VertexPositionsViewSpace}}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;5&quot;},{&quot;id&quot;:&quot;13&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#6042a6&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;I_{ndicesP1}=\\left[1,2,3,7,1,2,1,5,2,6,5,6\\right]&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;5&quot;},{&quot;id&quot;:&quot;14&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#000000&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;I_{ndicesP2}=\\left[2,4,7,4,2,5,5,3,4,4,6,8\\right]&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;5&quot;},{&quot;id&quot;:&quot;15&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#c74440&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;I_{ndicesP3}=\\left[3,3,4,8,5,6,3,7,6,8,7,7\\right]&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;5&quot;},{&quot;id&quot;:&quot;16&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#2d70b3&quot;,&quot;hidden&quot;:true,&quot;latex&quot;:&quot;U_{nsortedPolygons}=\\operatorname{polygon}\\left(S_{creenSpacePoints}\\left[I_{ndicesP1}\\right],S_{creenSpacePoints}\\left[I_{ndicesP2}\\right],S_{creenSpacePoints}\\left[I_{ndicesP3}\\right]\\right)&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;5&quot;},{&quot;id&quot;:&quot;17&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#388c46&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;V_{ertexDistances}=\\sqrt{X_{VertexPositionsViewSpace}^{2}+Y_{VertexPositionsViewSpace}^{2}+Z_{VertexPositionsViewSpace}^{2}}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;5&quot;},{&quot;id&quot;:&quot;18&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#fa7e19&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;P_{olygonAverageDist}=\\frac{V_{ertexDistances}\\left[I_{ndicesP1}\\right]+V_{ertexDistances}\\left[I_{ndicesP2}\\right]+V_{ertexDistances}\\left[I_{ndicesP3}\\right]}{3}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;5&quot;},{&quot;id&quot;:&quot;19&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#6042a6&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;C_{olors}=\\operatorname{sort}\\left(\\operatorname{hsv}\\left(\\left[30,60...360\\right],1,1\\right),-P_{olygonAverageDist}\\right)&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;5&quot;},{&quot;id&quot;:&quot;20&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#c74440&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;\\operatorname{sort}\\left(U_{nsortedPolygons},-P_{olygonAverageDist}\\right)&quot;,&quot;colorLatex&quot;:&quot;C_{olors}&quot;,&quot;lines&quot;:false,&quot;lineWidth&quot;:&quot;0&quot;,&quot;fill&quot;:true,&quot;fillOpacity&quot;:&quot;1&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;5&quot;}]}}" data-settings="{}"></div>
<h2 id="What's-Causing-This">What's Causing This?<a class="link-to-header" href="#What's-Causing-This"> #</a></h2>
<p>This problem is caused by the renderer trying to render vertices which are <em>behind the camera</em>. Due to the perspective projection, the vertices' X- and Y-coordinates are divided by their Z coordinates (multiplied by -1 to keep the coordinate system right-handed) to make the triangles appear smaller and closer to the center when they are far away. When the Z coordinate is the wrong sign, the X and Y coordinates' signs are <em>flipped</em> when they are divided, causing them to appear on the opposite side. When vertices in a triangle have different signs, this effect causes massive triangles to tear across the screen. And really, we shouldn't have anything rendering like this in the first place.</p>
<h2 id="How-do-we-fix-it">How do we fix it?<a class="link-to-header" href="#How-do-we-fix-it"> #</a></h2>
<p>The solution to this problem is to implement <em>Near Plane Clipping</em>. The <strong>Near Plane</strong> is a 3D plane close to the front of the camera which is usually parallel to its surface. When rendering, any geometry that goes past the near clipping plane does not appear. A reasonable near plane in most Desmos-based 3D renderers could be defined by the equation <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="z=-0.05" data-settings="{}"></span></span>, since a <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="z" data-settings="{}"></span></span> value of -0.05 represents something 0.05 units in front of the camera.</p>
<h3 id="A-simple-solution">A simple solution<a class="link-to-header" href="#A-simple-solution"> #</a></h3>
<p>The conceptually simplest way to apply a technique like this would be to delete any triangle with a Z-value greater than that which the near clipping plane defines as the cutoff. However, many of you can probably already anticipate the problem with this: If only <em>one</em> vertex of a triangle goes past the cutoff, the <em>entire thing</em> is going to disappear abruptly! We could mitigate this by decreasing the opacity of nearby triangles, but even <em>this</em> is a bandaid solution, albeit a nice one if you're strapped for time. We can do better.</p>
<h2 id="Pixel-Perfect-Near-Plane-Clipping">Pixel-Perfect Near Plane Clipping<a class="link-to-header" href="#Pixel-Perfect-Near-Plane-Clipping"> #</a></h2>
<p>To get Near Plane Clipping working properly, we have to consider what the Near Plane is even <em>doing</em> to the polygons. In a way, it's a bit like a knife, cutting through polygons and discarding the half that's closer to the camera.</p>
<p>How does it do this? There are four important cases here:</p>
<ol>
<li>All of the vertices are behind the near clipping plane, and thus the entire triangle is visible.</li>
<li>One of the vertices is in front of the near clipping plane and the other two are behind it, creating a new quadrilateral.</li>
<li>Two of the vertices are in front of the near clipping plane and the third is behind it, creating a new triangle.</li>
<li>All of the vertices are in front of the near clipping plane, making the entire triangle invisible.</li>
</ol>
<div class="invert-if-dark difference-blend-if-dark">
<p><img src="../../img/3d/near-plane-clipping-1.png" alt="See the text above."></p>
</div>
<h3 id="Which-vertices-are-in-front-of-the-near-clipping-plane">Which vertices are in front of the near clipping plane?<a class="link-to-header" href="#Which-vertices-are-in-front-of-the-near-clipping-plane"> #</a></h3>
<p>How do we calculate what case to pursue? Let's assume that we've defined three variables for the X, Y, and Z positions of the vertices in a triangle. We'll call them <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="X_{Tri}" data-settings="{}"></span></span>, <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="Y_{Tri}" data-settings="{}"></span></span>, and <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="Z_{Tri}" data-settings="{}"></span></span>. They are all three-element lists. We'll also define a variable <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="Z_{Near}" data-settings="{}"></span></span> which is equal to the cutoff value for our near clipping plane. As a reminder, any value <em>greater than</em> <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="Z_{Near}" data-settings="{}"></span></span> is to be clipped.</p>
<p>Any vertex can be either in in front of or behind the near clipping plane, giving us two possibilities per vertex, with three vertices total. This gives us <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="2^{3}=8" data-settings="{}"></span></span> possibilities in total. It'd be annoying to hardcode all of these, so is there a way to generalize this?</p>
<p>One possible solution is to use list filters. With the filter <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="X_{Tri}\left[Z_{Tri}\le Z_{Near}\right]" data-settings="{}"></span></span>, we can get a list of all the X-coordinates that are <em>behind or on</em> the near clipping plane. Similarly, we can use <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="X_{Tri}\left[Z_{Tri}>Z_{Near}\right]" data-settings="{}"></span></span> to get all X-coordinates <em>in front of</em> the near clipping plane. We can then rinse and repeat with the rest of the axes to get filtered lists of points in front of and behind the near clipping plane. But more importantly, we can use one of these filtered lists to decide how many points are in front of the near clipping plane and therefore figure out whether we need to use Case 1, Case 2, Case 3, or Case 4.</p>
<h3 id="Cases-1-and-4">Cases 1 &amp; 4<a class="link-to-header" href="#Cases-1-and-4"> #</a></h3>
<p>Cases 1 and 4 are the simplest: For 1, we render the triangle normally, and for 4, we disregard it entirely, rendering an empty polygon with no vertices instead. Cases 2 and 3 are where things get weird.</p>
<h3 id="Case-3">Case 3<a class="link-to-header" href="#Case-3"> #</a></h3>
<h4 id="Finding-the-new-vertices">Finding the new vertices<a class="link-to-header" href="#Finding-the-new-vertices"> #</a></h4>
<p>Let's start with case 3, since triangles tend to be easier to work with than quads, and 3 produces a triangle. The difficulty comes in the fact this triangle isn't our original triangle: Two of its vertices are entirely new, and we need to find out where they're located. First, some definitions of the vertices of the <em>original triangle</em> (pre-clipping) to avoid confusion:</p>
<ul>
<li>
<p>Let's call the coordinates of the first vertex in front <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="X_{VertNear1}" data-settings="{}"></span></span>, <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="Y_{VertNear1}" data-settings="{}"></span></span>, and <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="Z_{VertNear1}" data-settings="{}"></span></span>.</p>
<ul>
<li>Altogether I'll call this the "first near vertex"</li>
</ul>
</li>
<li>
<p>Let's call the coordinates of the second vertex in front <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="X_{VertNear2}" data-settings="{}"></span></span>, <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="Y_{VertNear2}" data-settings="{}"></span></span>, and <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="Z_{VertNear2}" data-settings="{}"></span></span>.</p>
<ul>
<li>Altogether I'll call this the "second near vertex"</li>
</ul>
</li>
<li>
<p>Let's call the coordinates of the first vertex behind <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="X_{VertFar}" data-settings="{}"></span></span>, <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="Y_{VertFar}" data-settings="{}"></span></span>, and <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="Z_{VertFar}" data-settings="{}"></span></span>.</p>
<ul>
<li>Altogether I'll call this the "far vertex"</li>
</ul>
</li>
</ul>
<div class="invert-if-dark difference-blend-if-dark">
<p><img src="../../img/3d/near-plane-clipping-case-3.png" alt="See text above"></p>
</div>
<p>With all of this said, the two new vertices are defined as follows:</p>
<ol>
<li>The <em>point</em> on the line segment connecting the <em>first near vertex</em> and the far vertex where <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="z=Z_{Near}" data-settings="{}"></span></span>.</li>
<li>The <em>point</em> on the line segment connecting the <em>second near vertex</em> and the far vertex where <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="z=Z_{Near}" data-settings="{}"></span></span>.</li>
</ol>
<p>Let's consider the first of these points— the one on the segment connecting the <em>first near vertex</em> and the <em>far vertex</em>. We can represent this line segment as a 3D parametric equation where <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="t" data-settings="{}"></span></span> ranges from 0 to 1:</p>
<p><span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="x=X_{VertFar}+\left(X_{VertNear1}-X_{VertFar}\right)\cdot t" data-settings="{}"></span></span></p>
<p><span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="y=Y_{VertFar}+\left(Y_{VertNear1}-Y_{VertFar}\right)\cdot t" data-settings="{}"></span></span></p>
<p><span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="z=Z_{VertFar}+\left(Z_{VertNear1}-Z_{VertFar}\right)\cdot t" data-settings="{}"></span></span></p>
<p>Then to find the <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="t" data-settings="{}"></span></span>-value where <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="z=Z_{Near}" data-settings="{}"></span></span>, we need to solve the <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="z" data-settings="{}"></span></span> equation for <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="t" data-settings="{}"></span></span> after setting it equal to <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="Z_{Near}" data-settings="{}"></span></span>:</p>
<p><span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="Z_{VertFar}+\left(Z_{VertNear1}-Z_{VertFar}\right)\cdot t=Z_{Near}" data-settings="{}"></span></span></p>
<p><span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="\left(Z_{VertNear1}-Z_{VertFar}\right)\cdot t=Z_{Near}-Z_{VertFar}" data-settings="{}"></span></span></p>
<p><span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="t=\frac{Z_{Near}-Z_{VertFar}}{Z_{VertNear1}-Z_{VertFar}}" data-settings="{}"></span></span></p>
<p>Now that we have <span class="dcg-calculator-api-container"><span class="eleventy-desmos-mq-container dcg-mq-math-mode" data-latex="t" data-settings="{}"></span></span>, we can plug it back into the other two equations in the parametric to get the X and Y coordinates of the first new point.</p>
<p>We then repeat the process for the <em>other</em> point. This is essentially the same operation, but with one of the endpoints of the line segment changed.</p>
<p>And now that we have these two points, we can connect them together with the <em>far vertex</em> and render the resulting triangle.</p>
<h3 id="Case-2">Case 2<a class="link-to-header" href="#Case-2"> #</a></h3>
<p>The process for Case 2 is virtually identical. I'll let you derive it on your own, with the help of this picture.</p>
<div class="invert-if-dark difference-blend-if-dark">
<p><img src="../../img/3d/near-plane-clipping-case-2.png" alt="See text above"></p>
</div>
<p>Just make sure to render the points of the quadrilerateral in the <em>correct order</em>, otherwise the quadrilateral will look like this, which you <em>don't</em> want:</p>
<div class="eleventy-desmos-dcg-container" data-state="{&quot;version&quot;:9,&quot;graph&quot;:{&quot;viewport&quot;:{&quot;xmin&quot;:-10,&quot;xmax&quot;:10,&quot;ymin&quot;:-10,&quot;ymax&quot;:10},&quot;userLockedViewport&quot;:true},&quot;expressions&quot;:{&quot;list&quot;:[{&quot;id&quot;:&quot;1&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#c74440&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;\\operatorname{polygon}\\left(\\left(5,5\\right),\\left(-5,-5\\right),\\left(-5,5\\right),\\left(5,-5\\right)\\right)&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{}}]}}" data-settings="{}"></div>
<h2 id="The-End-Result">The End Result<a class="link-to-header" href="#The-End-Result"> #</a></h2>
<p>Here is a full implementation of near plane clipping as described above. <strong>Note that the clipping has been exaggerated here for effect— in your graph it should probably be a lot more subtle (consider a smaller cutoff, maybe 0.1 or 0.05)</strong>:</p>
<div class="big-desmos">
<div class="eleventy-desmos-dcg-container" data-state="{&quot;version&quot;:9,&quot;randomSeed&quot;:&quot;&quot;,&quot;graph&quot;:{&quot;viewport&quot;:{&quot;xmin&quot;:-2,&quot;ymin&quot;:-2,&quot;xmax&quot;:2,&quot;ymax&quot;:2},&quot;squareAxes&quot;:true,&quot;xAxisLabel&quot;:&quot;&quot;,&quot;yAxisLabel&quot;:&quot;&quot;,&quot;xAxisArrowMode&quot;:&quot;NONE&quot;,&quot;yAxisArrowMode&quot;:&quot;NONE&quot;,&quot;xAxisMinorSubdivisions&quot;:0,&quot;yAxisMinorSubdivisions&quot;:0,&quot;xAxisStep&quot;:0,&quot;yAxisStep&quot;:0,&quot;degreeMode&quot;:false,&quot;showGrid&quot;:true,&quot;showXAxis&quot;:true,&quot;showYAxis&quot;:true,&quot;xAxisNumbers&quot;:true,&quot;yAxisNumbers&quot;:true,&quot;polarNumbers&quot;:true,&quot;restrictGridToFirstQuadrant&quot;:false,&quot;polarMode&quot;:false,&quot;userLockedViewport&quot;:true},&quot;expressions&quot;:{&quot;list&quot;:[{&quot;id&quot;:&quot;2&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#c74440&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;N_{earClippingPlaneZ}=-1&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;animationPeriod&quot;:4000,&quot;loopMode&quot;:&quot;LOOP_FORWARD_REVERSE&quot;,&quot;playDirection&quot;:1,&quot;isPlaying&quot;:false,&quot;hardMin&quot;:true,&quot;min&quot;:&quot;-2&quot;,&quot;hardMax&quot;:true,&quot;max&quot;:&quot;-0.01&quot;},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{}},{&quot;id&quot;:&quot;3&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#2d70b3&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;C_{ameraX}=0&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{}},{&quot;id&quot;:&quot;4&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#388c46&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;C_{ameraY}=0&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{}},{&quot;id&quot;:&quot;5&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#fa7e19&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;C_{ameraZ}=0&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;animationPeriod&quot;:4000,&quot;loopMode&quot;:&quot;LOOP_FORWARD_REVERSE&quot;,&quot;playDirection&quot;:1,&quot;isPlaying&quot;:true,&quot;hardMin&quot;:true,&quot;min&quot;:&quot;-8&quot;,&quot;hardMax&quot;:true,&quot;max&quot;:&quot;-3&quot;},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{}},{&quot;id&quot;:&quot;6&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;folder&quot;,&quot;hidden&quot;:false,&quot;collapsed&quot;:false,&quot;title&quot;:&quot;Near Plane Clipping&quot;},{&quot;id&quot;:&quot;7&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#6042a6&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;x_{s}=\\left[x_{1},x_{2},x_{3}\\right]&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;6&quot;},{&quot;id&quot;:&quot;8&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#000000&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;y_{s}=\\left[y_{1},y_{2},y_{3}\\right]&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;6&quot;},{&quot;id&quot;:&quot;9&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#c74440&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;z_{s}=\\left[z_{1},z_{2},z_{3}\\right]&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;6&quot;},{&quot;id&quot;:&quot;10&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#2d70b3&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;x_{InFront}=x_{s}\\left[z_{s}>Z_{Near}\\right]&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;6&quot;},{&quot;id&quot;:&quot;11&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#388c46&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;y_{InFront}=y_{s}\\left[z_{s}>Z_{Near}\\right]&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;6&quot;},{&quot;id&quot;:&quot;12&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#fa7e19&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;z_{InFront}=z_{s}\\left[z_{s}>Z_{Near}\\right]&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;6&quot;},{&quot;id&quot;:&quot;13&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#6042a6&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;x_{Behind}=x_{s}\\left[z_{s}\\le Z_{Near}\\right]&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;6&quot;},{&quot;id&quot;:&quot;14&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#000000&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;y_{Behind}=y_{s}\\left[z_{s}\\le Z_{Near}\\right]&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;6&quot;},{&quot;id&quot;:&quot;15&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#c74440&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;z_{Behind}=z_{s}\\left[z_{s}\\le Z_{Near}\\right]&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;6&quot;},{&quot;id&quot;:&quot;16&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#2d70b3&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;t_{1case3}=\\frac{Z_{Near}-z_{Behind}\\left[1\\right]}{z_{InFront}\\left[1\\right]-z_{Behind}\\left[1\\right]}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;6&quot;},{&quot;id&quot;:&quot;17&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#388c46&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;t_{2case3}=\\frac{Z_{Near}-z_{Behind}\\left[1\\right]}{z_{InFront}\\left[2\\right]-z_{Behind}\\left[1\\right]}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;6&quot;},{&quot;id&quot;:&quot;18&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#fa7e19&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;x_{1case3}=x_{Behind}\\left[1\\right]+\\left(x_{InFront}\\left[1\\right]-x_{Behind}\\left[1\\right]\\right)\\cdot t_{1case3}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;6&quot;},{&quot;id&quot;:&quot;19&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#6042a6&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;y_{1case3}=y_{Behind}\\left[1\\right]+\\left(y_{InFront}\\left[1\\right]-y_{Behind}\\left[1\\right]\\right)\\cdot t_{1case3}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;6&quot;},{&quot;id&quot;:&quot;20&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#000000&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;z_{1case3}=z_{Behind}\\left[1\\right]+\\left(z_{InFront}\\left[1\\right]-z_{Behind}\\left[1\\right]\\right)\\cdot t_{1case3}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;6&quot;},{&quot;id&quot;:&quot;21&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#c74440&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;x_{2case3}=x_{Behind}\\left[1\\right]+\\left(x_{InFront}\\left[2\\right]-x_{Behind}\\left[1\\right]\\right)\\cdot t_{2case3}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;6&quot;},{&quot;id&quot;:&quot;22&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#2d70b3&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;y_{2case3}=y_{Behind}\\left[1\\right]+\\left(y_{InFront}\\left[2\\right]-y_{Behind}\\left[1\\right]\\right)\\cdot t_{2case3}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;6&quot;},{&quot;id&quot;:&quot;23&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#388c46&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;z_{2case3}=z_{Behind}\\left[1\\right]+\\left(z_{InFront}\\left[2\\right]-z_{Behind}\\left[1\\right]\\right)\\cdot t_{2case3}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;6&quot;},{&quot;id&quot;:&quot;24&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#fa7e19&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;t_{1case2}=\\frac{Z_{Near}-z_{Behind}\\left[1\\right]}{z_{InFront}\\left[1\\right]-z_{Behind}\\left[1\\right]}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;6&quot;},{&quot;id&quot;:&quot;25&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#6042a6&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;t_{2case2}=\\frac{Z_{Near}-z_{Behind}\\left[2\\right]}{z_{InFront}\\left[1\\right]-z_{Behind}\\left[2\\right]}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;6&quot;},{&quot;id&quot;:&quot;26&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#000000&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;x_{1case2}=x_{Behind}\\left[1\\right]+\\left(x_{InFront}\\left[1\\right]-x_{Behind}\\left[1\\right]\\right)\\cdot t_{1case2}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;6&quot;},{&quot;id&quot;:&quot;27&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#c74440&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;y_{1case2}=y_{Behind}\\left[1\\right]+\\left(y_{InFront}\\left[1\\right]-y_{Behind}\\left[1\\right]\\right)\\cdot t_{1case2}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;6&quot;},{&quot;id&quot;:&quot;28&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#2d70b3&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;z_{1case2}=z_{Behind}\\left[1\\right]+\\left(z_{InFront}\\left[1\\right]-z_{Behind}\\left[1\\right]\\right)\\cdot t_{1case2}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;6&quot;},{&quot;id&quot;:&quot;29&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#388c46&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;x_{2case2}=x_{Behind}\\left[2\\right]+\\left(x_{InFront}\\left[1\\right]-x_{Behind}\\left[2\\right]\\right)\\cdot t_{2case2}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;6&quot;},{&quot;id&quot;:&quot;30&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#fa7e19&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;y_{2case2}=y_{Behind}\\left[2\\right]+\\left(y_{InFront}\\left[1\\right]-y_{Behind}\\left[2\\right]\\right)\\cdot t_{2case2}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;6&quot;},{&quot;id&quot;:&quot;31&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#6042a6&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;z_{2case2}=z_{Behind}\\left[2\\right]+\\left(z_{InFront}\\left[1\\right]-z_{Behind}\\left[2\\right]\\right)\\cdot t_{2case2}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;6&quot;},{&quot;id&quot;:&quot;32&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#000000&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;g_{etClippedPolygon}\\left(Z_{Near},x_{1},y_{1},z_{1},x_{2},y_{2},z_{2},x_{3},y_{3},z_{3}\\right)=\\left\\{\\operatorname{length}\\left(x_{Behind}\\right)=3:\\operatorname{polygon}\\left(\\left(\\frac{x_{1}}{-z_{1}},\\frac{y_{1}}{-z_{1}}\\right),\\left(\\frac{x_{2}}{-z_{2}},\\frac{y_{2}}{-z_{2}}\\right),\\left(\\frac{x_{3}}{-z_{3}},\\frac{y_{3}}{-z_{3}}\\right)\\right),\\operatorname{length}\\left(x_{Behind}\\right)=2:\\operatorname{polygon}\\left(\\left(\\frac{x_{Behind}\\left[2\\right]}{-z_{Behind}\\left[2\\right]},\\frac{y_{Behind}\\left[2\\right]}{-z_{Behind}\\left[2\\right]}\\right),\\left(\\frac{x_{Behind}\\left[1\\right]}{-z_{Behind}\\left[1\\right]},\\frac{y_{Behind}\\left[1\\right]}{-z_{Behind}\\left[1\\right]}\\right),\\left(\\frac{x_{1case2}}{-z_{1case2}},\\frac{y_{1case2}}{-z_{1case2}}\\right),\\left(\\frac{x_{2case2}}{-z_{2case2}},\\frac{y_{2case2}}{-z_{2case2}}\\right)\\right),\\operatorname{length}\\left(x_{Behind}\\right)=1:\\operatorname{polygon}\\left(\\left(\\frac{x_{Behind}\\left[1\\right]}{-z_{Behind}\\left[1\\right]},\\frac{y_{Behind}\\left[1\\right]}{-z_{Behind}\\left[1\\right]}\\right),\\left(\\frac{x_{1case3}}{-z_{1case3}},\\frac{y_{1case3}}{-z_{1case3}}\\right),\\left(\\frac{x_{2case3}}{-z_{2case3}},\\frac{y_{2case3}}{-z_{2case3}}\\right)\\right),\\operatorname{length}\\left(x_{Behind}\\right)=0:\\operatorname{polygon}\\left(\\right)\\right\\}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;6&quot;},{&quot;id&quot;:&quot;33&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;folder&quot;,&quot;hidden&quot;:false,&quot;collapsed&quot;:true,&quot;title&quot;:&quot;Internals&quot;},{&quot;id&quot;:&quot;34&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#c74440&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;X_{VertexPositionsModelSpace}=\\left[-1,1,-1,1,-1,1,-1,1\\right]+1.3&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;33&quot;},{&quot;id&quot;:&quot;35&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#2d70b3&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;Y_{VertexPositionsModelSpace}=\\left[-1,-1,1,1,-1,-1,1,1\\right]+1.5&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;33&quot;},{&quot;id&quot;:&quot;36&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#388c46&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;Z_{VertexPositionsModelSpace}=\\left[-5,-5,-5,-5,-7,-7,-7,-7\\right]&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;33&quot;},{&quot;id&quot;:&quot;37&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#fa7e19&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;X_{VertexPositionsViewSpace}=X_{VertexPositionsModelSpace}-C_{ameraX}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;33&quot;},{&quot;id&quot;:&quot;38&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#6042a6&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;Y_{VertexPositionsViewSpace}=Y_{VertexPositionsModelSpace}-C_{ameraY}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;33&quot;},{&quot;id&quot;:&quot;39&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#000000&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;Z_{VertexPositionsViewSpace}=Z_{VertexPositionsModelSpace}-C_{ameraZ}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;33&quot;},{&quot;id&quot;:&quot;40&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#c74440&quot;,&quot;hidden&quot;:true,&quot;latex&quot;:&quot;S_{creenSpacePoints}=\\frac{\\left(X_{VertexPositionsViewSpace},Y_{VertexPositionsViewSpace}\\right)}{-Z_{VertexPositionsViewSpace}}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;33&quot;},{&quot;id&quot;:&quot;41&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#2d70b3&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;I_{ndicesP1}=\\left[1,2,3,7,1,2,1,5,2,6,5,6\\right]&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;33&quot;},{&quot;id&quot;:&quot;42&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#388c46&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;I_{ndicesP2}=\\left[2,4,7,4,2,5,5,3,4,4,6,8\\right]&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;33&quot;},{&quot;id&quot;:&quot;43&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#fa7e19&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;I_{ndicesP3}=\\left[3,3,4,8,5,6,3,7,6,8,7,7\\right]&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;33&quot;},{&quot;id&quot;:&quot;44&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#6042a6&quot;,&quot;hidden&quot;:true,&quot;latex&quot;:&quot;U_{nsortedPolygons}=\\left[g_{etClippedPolygon}\\left(N_{earClippingPlaneZ},X_{VertexPositionsViewSpace}\\left[I_{ndicesP1}\\left[i\\right]\\right],Y_{VertexPositionsViewSpace}\\left[I_{ndicesP1}\\left[i\\right]\\right],Z_{VertexPositionsViewSpace}\\left[I_{ndicesP1}\\left[i\\right]\\right],X_{VertexPositionsViewSpace}\\left[I_{ndicesP2}\\left[i\\right]\\right],Y_{VertexPositionsViewSpace}\\left[I_{ndicesP2}\\left[i\\right]\\right],Z_{VertexPositionsViewSpace}\\left[I_{ndicesP2}\\left[i\\right]\\right],X_{VertexPositionsViewSpace}\\left[I_{ndicesP3}\\left[i\\right]\\right],Y_{VertexPositionsViewSpace}\\left[I_{ndicesP3}\\left[i\\right]\\right],Z_{VertexPositionsViewSpace}\\left[I_{ndicesP3}\\left[i\\right]\\right]\\right)\\operatorname{for}i=\\left[1...\\operatorname{length}\\left(I_{ndicesP1}\\right)\\right]\\right]&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;33&quot;},{&quot;id&quot;:&quot;45&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#000000&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;V_{ertexDistances}=\\sqrt{X_{VertexPositionsViewSpace}^{2}+Y_{VertexPositionsViewSpace}^{2}+Z_{VertexPositionsViewSpace}^{2}}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;33&quot;},{&quot;id&quot;:&quot;46&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#c74440&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;P_{olygonAverageDist}=\\frac{V_{ertexDistances}\\left[I_{ndicesP1}\\right]+V_{ertexDistances}\\left[I_{ndicesP2}\\right]+V_{ertexDistances}\\left[I_{ndicesP3}\\right]}{3}&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;33&quot;},{&quot;id&quot;:&quot;47&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#2d70b3&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;C_{olors}=\\operatorname{sort}\\left(\\operatorname{hsv}\\left(\\left[30,60...360\\right],1,1\\right),-P_{olygonAverageDist}\\right)&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;33&quot;},{&quot;id&quot;:&quot;48&quot;,&quot;secret&quot;:false,&quot;type&quot;:&quot;expression&quot;,&quot;color&quot;:&quot;#c74440&quot;,&quot;hidden&quot;:false,&quot;latex&quot;:&quot;\\operatorname{sort}\\left(U_{nsortedPolygons},-P_{olygonAverageDist}\\right)&quot;,&quot;colorLatex&quot;:&quot;C_{olors}&quot;,&quot;lines&quot;:false,&quot;lineWidth&quot;:&quot;0&quot;,&quot;fill&quot;:true,&quot;fillOpacity&quot;:&quot;1&quot;,&quot;regressionParameters&quot;:{},&quot;slider&quot;:{&quot;hardMin&quot;:false,&quot;hardMax&quot;:false},&quot;displayEvaluationAsFraction&quot;:false,&quot;vizProps&quot;:{},&quot;folderId&quot;:&quot;33&quot;}]}}" data-settings="{}"></div>
</div>

        
      </main>
    </div>
    <footer>
  <h2>Licensing</h2>
  <ul>
    <li>The source code that generates this site is licensed under the <a href="https://github.com/radian628/unofficial-desmos-wiki/blob/main/LICENSE.txt">MIT License</a>.</li>
    <li>All graphs and equations are licensed under <a href="https://creativecommons.org/public-domain/cc0/">CC0</a>, which essentially means "do whatever you want," so feel free to copy them to your own projects!</li>
    <li>The wiki articles themselves are licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC-BY-SA 4.0</a> so that the articles on this wiki may forever be free.</li>
  </ul>
</footer>
    <script>
      const ldt = document.getElementById("light-dark-toggle");

      let colorScheme = localStorage.getItem("color-scheme");

      if (!colorScheme) {
        localStorage.setItem("color-scheme", "light");
        let colorScheme = "light";
      }

      function setTheme() {
        const colorScheme = localStorage.getItem("color-scheme");

        document.body.classList.toggle("dark", colorScheme === "dark");

        ldt.innerText = colorScheme === "light" ? "☀️" : "🌙"
      }
      
      ldt.onclick = () => {
        localStorage.setItem("color-scheme", 
          localStorage.getItem("color-scheme") === "light" ? "dark" : "light")
        setTheme();
      }

      setTheme();
    </script>
  </body>
</html>